# REST API Server for {{appName}}

## Overview
This API Server was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.
It uses the [Pistache](https://github.com/oktal/pistache) Framework.

## Files organization
The Pistache C++ REST server generator creates three folders:
- `api`: This folder contains the handlers for each method specified in the OpenAPI definition. Every handler extracts
the path and body parameters (if any) from the requests and tries to parse and possibly validate them.
Once this step is completed, the main API class calls the corresponding abstract method that should be implemented
by the developer (a basic implementation is provided under the `impl` folder)
- `impl`: As written above, the implementation folder contains, for each API, the corresponding implementation class,
which extends the main API class and implements the abstract methods.
Every method receives the path and body parameters as constant reference variables and a reference to the response
object, that should be filled with the right response and sent at the end of the method with the command:
response.send(returnCode, responseBody, [mimeType])
- `model`: This folder contains the corresponding class for every object schema found in the OpenAPI specification.

The main folder contains also a file with a main that can be used to start the server.
Of course, is you should customize this file based on your needs

## Installation
We use [Conan](conan.io) to build the server.
First of all, you need to download and install Conan.

Once Conan is installed, you need to create `conanfile.py` and copy below code into it.
```
from conans import ConanFile, CMake


class ApiServerConan(ConanFile):
    name = "api-server"
    # NOTE: This version is going to be overwritten by the CI/CD pipeline
    version = "0.1"
    license = "<Put your license here>"
    author = "<Put your name here> <And your email here>"
    url = "<Package recipe repository url here, for issues about the package>"
    description = "<Description of the api server here>"
    topics = ("<Put some tag here>", "<here>", "<and here>")
    settings = "os", "compiler", "build_type", "arch"
    options = {"shared": [True, False], "fPIC": [True, False]}
    default_options = {"shared": False, "fPIC": True}
    generators = "cmake"
    exports_sources = "CMakeLists.txt", "src/*", "include/*"
    requires = "nlohmann_json/3.9.1", "pistache/cci.20201127", "rapidjson/cci.20200410"

    def config_options(self):
        if self.settings.os == "Windows":
            del self.options.fPIC

    def build(self):
        cmake = CMake(self)
        cmake.configure(source_folder=".")
        cmake.build()
```
In order to compile and run the server please follow the steps below:
```bash
mkdir build
cd build
conan install ..
conan build ..
```

Once compiled run the server:

```bash
cd build
./api-server
```

## Libraries required
- [pistache](http://pistache.io/quickstart)
- [JSON for Modern C++](https://github.com/nlohmann/json/#integration): Please download the `json.hpp` file and
put it under the model/nlohmann folder

## Namespaces
{{{apiPackage}}}
{{{modelPackage}}}
